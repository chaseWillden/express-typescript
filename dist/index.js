parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"l7CR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=e=>(t,s,o)=>{Promise.resolve(e(t,s,o)).catch(o)};exports.default=e;
},{}],"gYAi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t,s){this.status=t,this.data=s}}exports.default=t;
},{}],"xTEG":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,s,r){return new(s||(s=Promise))(function(o,u){function i(t){try{h(r.next(t))}catch(e){u(e)}}function n(t){try{h(r.throw(t))}catch(e){u(e)}}function h(t){t.done?o(t.value):new s(function(e){e(t.value)}).then(i,n)}h((r=r.apply(t,e||[])).next())})},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const s=require("express"),r=e(require("./AsyncMiddleware")),o=e(require("./ResponseError"));class u{constructor(){this.routes={GET:{},POST:{},PATCH:{},PUT:{},DELETE:{}},this.router=new s.Router}processRoute(e,s,r){return t(this,void 0,void 0,function*(){const{params:t,query:r,body:u}=e,i=e.method.toUpperCase(),n=e.route.path,h=this.routes[i];if(!h[n])throw new Error(`${n} not found`);try{const i=h[n],c=yield i(t,r,u,{req:e,res:s});s.status(200).send(c)}catch(a){a instanceof o.default?s.status(a.status).send(a.data):s.status(500).send(a.message)}})}getRequest(t,e){this.routes.GET[t]=e,this.router.get(t,r.default(this.processRoute.bind(this)))}postRequest(t,e){this.routes.POST[t]=e,this.router.post(t,r.default(this.processRoute.bind(this)))}deleteRequest(t,e){this.router.DELETE[t]=e,this.router.delete(t,r.default(this.processRoute.bind(this)))}putRequest(t,e){this.router.PUT[t]=e,this.router.put(t,r.default(this.processRoute.bind(this)))}patchRequest(t,e){this.router.PATCH[t]=e,this.router.patch(t,r.default(this.processRoute.bind(this)))}}exports.AppRouter=u;
},{"./AsyncMiddleware":"l7CR","./ResponseError":"gYAi"}],"9Db3":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const e=t(require("express")),s={port:3030};class o{constructor(t=s){this.app=e.default(),this.options=t,this.app.set("port",t.port)}run(){console.log(`Listening on port ${this.options.port}`),this.app.listen(this.options.port)}registerRoute(t){}__registerRoute__(t,e){this.app.use(t,e.router)}}exports.server=new o;
},{}],"+fUd":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./AppRouter")),e(require("./Server"));
},{"./AppRouter":"xTEG","./Server":"9Db3"}],"A3SX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata");class e{static resolve(t){return new t(...(Reflect.getMetadata("design:paramtypes",t)||[]).map(t=>e.resolve(t)))}}exports.Injector=e;
},{}],"FKnt":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./Injector"),r=e(require("./AsyncMiddleware")),o=require("./Server");class s{constructor(){this.route={},this.registered={}}addClass(e,s){if(this.registered[s])return void console.warn(s+" already registered");const i=t.Injector.resolve(e),u=e.name,n=this.route[u];if(n){for(const e of n){const t=i[e.propertyName];if(!t)continue;const o=i;o.routes[e.method]["/"+e.path]=t.bind(i),o.router[e.method.toLowerCase()]("/"+e.path,r.default(o.processRoute.bind(o)))}o.server.__registerRoute__(this.cleanUpRoutePath(s),i),this.registered[s]=!0}else console.warn("No routes registered with "+u)}addRoute(e,t,r,o){this.route[e]||(this.route[e]=[]),this.route[e].push({path:t,propertyName:r,method:o})}cleanUpRoutePath(e){return e&&"/"===e[0]?e:"/"+e}}const i=new s;exports.default=i;
},{"./Injector":"A3SX","./AsyncMiddleware":"l7CR","./Server":"9Db3"}],"T75G":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("./RouteStore"));exports.Route=((e="")=>r=>{t.default.addClass(r,e)});
},{"./RouteStore":"FKnt"}],"NP3Y":[function(require,module,exports) {
"use strict";function e(e,t,r){}Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata"),exports.Inject=(e=>{}),exports.Required=e;
},{}],"yVEg":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var o,s=arguments.length,n=s<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,c);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,r,n):o(t,r))||n);return s>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../src/decorators");let r=class{getData(){return"data"}};r=e([t.Inject],r),exports.TestBusiness=r;
},{"../src/decorators":"NP3Y"}],"P2Up":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const e=t(require("./RouteStore"));exports.Get=((t="")=>(o,r,u)=>{e.default.addRoute(o.constructor.name,t,r,"GET")}),exports.Post=((t="")=>(o,r,u)=>{e.default.addRoute(o.constructor.name,t,r,"POST")}),exports.Delete=((t="")=>(o,r,u)=>{e.default.addRoute(o.constructor.name,t,r,"DELETE")}),exports.Patch=((t="")=>(o,r,u)=>{e.default.addRoute(o.constructor.name,t,r,"PATCH")});
},{"./RouteStore":"FKnt"}],"R1BE":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,r,n){var s,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function i(e){try{u(n.next(e))}catch(t){o(t)}}function c(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?s(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const s=require("../src/AppRouter"),o=require("../src/RouteDecorator"),i=require("./TestBusiness"),c=require("../src/MethodDecorators");let u=class extends s.AppRouter{constructor(e){super(),this.testBusiness=e}getData(){return n(this,void 0,void 0,function*(){return this.testBusiness.getData()})}};t([c.Get("b"),r("design:type",Function),r("design:paramtypes",[]),r("design:returntype",Promise)],u.prototype,"getData",null),u=t([o.Route("test"),r("design:paramtypes",["function"==typeof(e=void 0!==i.TestBusiness&&i.TestBusiness)?e:Object])],u),exports.default=u;
},{"../src/AppRouter":"xTEG","../src/RouteDecorator":"T75G","./TestBusiness":"yVEg","../src/MethodDecorators":"P2Up"}],"7QCb":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("../src"),t=e(require("./TestRoute"));r.server.registerRoute(t.default),r.server.run();
},{"../src":"+fUd","./TestRoute":"R1BE"}]},{},["7QCb"], null)
//# sourceMappingURL=/index.map